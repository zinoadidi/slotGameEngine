!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);let o=new class{constructor(){this.storage={set:function(e,t){this.db[e]=t,sessionStorage.db=JSON.stringify(this.db)},get:function(e){return this.db=JSON.parse(sessionStorage.db),this.db[e]},db:{reelObjects:{},totalReels:0,balance:0}},this.config=function(e,t){this.storage.set("balance",t),e=this.gameUI.attachReels(e),this.storage.set("reelObjects",e)},this.gameUI={attachReels:function(e){try{for(var t=0;t<e.length;t++){var n=document.querySelector("#reel-container"),o=Math.round(12/e.length);e.length>6&&(o=1);var i=document.createElement("DIV");i.id="reel"+t,i.className=`reel w3-col s${o} m${o} l${o} w3-border-left w3-border-right`;for(var s=0;s<e[t].images.length;){var r=document.createElement("IMG");r.src=e[0].images[s].src,r.className="reel-symbol",i.appendChild(r),s++}n.appendChild(i),e[t].id=i.id}return e}catch(e){console.log(e)}}},this.createReelObj=function(e,t){return this.storage.set("totalReels",e),new Promise(function(n,o){let i=[],s=[];if(t&&e>0)try{for(let e=0;e<t.length;e++){var r=t[e].split("/");r=(r=(r=r[r.length-1]).split("."))[0],s[e]={symbolId:e,src:t[e],imageName:r}}for(let t=0;t<e;t++)i[t]={images:""},i[t].images=s;n(i)}catch(e){o(Error(e))}else o(new Error("Kindly provide value for images and number of reels"))})},this.spinReel=function(e,t){let n=(e=(e=this.storage.get("reelObjects"))[t]).images.shift();e.images.push(n);for(let t=0;t<e.images.length;t++)document.querySelector(`#${e.id}`).childNodes[t].src=e.images[t].src;let o=this.storage.get("reelObjects");o[t]=e,this.storage.set("reelObjects",o)},this.deductBalance=function(e){var t=parseInt(this.storage.get("balance"))-parseInt(e);return this.storage.set("balance",t),t},this.enableInteraction=function(){document.querySelectorAll(".interactable").forEach(function(e){e.classList.remove("visible")})},this.disableInteraction=function(){document.querySelectorAll(".interactable").forEach(function(e){e.classList.add("visible")})},this.startLoad=function(){document.querySelector(".loadingbar").classList.remove("hidden")},this.stopLoad=function(){var e=document.querySelector(".loadingbar");e.classList.add("hidden"),(e=document.querySelector("#display")).classList.remove("hidden")},this.calculateScore=async function(e){let t=this.storage.get("reelObjects"),n={top:[],middle:[],bottom:[]};for(var o=0;o<t.length;o++)n.top.push(t[o].images[0]),n.middle.push(t[o].images[1]),n.bottom.push(t[o].images[2]);console.dir(n);var i=[];return e.forEach(function(e,t){var o=e.position;o.length>1||(o=o[0],console.log(o));var s=0,r=!1;switch(o){case"top":var c=0;for(s=0;s<n.top.length;s++)console.log(n.top[s].imageName+":"+e.item),n.top[s].imageName==e.item?(r=!0,c+=1):r=!1;console.log(r),console.log(c),r&&c==e.nOfTimePresent&&(i.push(e),r=!1);break;case"center":for(c=0,s=0;s<n.middle.length;s++)n.middle[s].imageName==e.item?(r=!0,c+=1):r=!1;console.log(r),console.log(c),r&&c==e.nOfTimePresent&&(i.push(e),r=!1);break;case"bottom":for(s=0;s<n.bottom.length;s++)n.bottom[s].imageName==e.item?(r=!0,c+=1):r=!1;console.log(r),console.log(c),r&&c==e.nOfTimePresent&&(i.push(e),r=!1)}}),console.dir(i),Promise.resolve(t)}}};o.spinningReels=[],o.numOfRequestCompleted=0,o.spinningTime=0,o.spinSpeed=0,o.winningCombinations=[{item:["CHERRY"],nOfTimePresent:[3],position:["top"],score:2e3},{item:["CHERRY"],nOfTimePresent:[3],position:["center"],score:1e3},{item:["CHERRY"],nOfTimePresent:[3],position:["bottom"],score:4e3},{item:["7"],nOfTimePresent:[3],position:["any"],score:150},{item:["cherry","7"],nOfTimePresent:["any"],position:["any"],score:75},{item:["3xBAR"],nOfTimePresent:[3],position:["any"],score:50},{item:["2xBAR"],nOfTimePresent:[3],position:["any"],score:20},{item:["3xBAR","BAR","2xBAR"],nOfTimePresent:["any"],position:["any"],score:5}],o.mode="random";const i=document.querySelector("#spin_btn"),s=document.querySelector("#game_mode_btn"),r=document.querySelector("#close_debug_area"),c=document.querySelector("#switchGameModeRandom"),l=document.querySelector("#switchGameModeFixed");function a(e){o.storage.get("reelObjects");o.spinningReels[e]=setInterval(function(){var t=o.storage.get("reelObjects")[e];o.spinReel(t,e)},o.spinSpeed),setTimeout(function(){clearInterval(o.spinningReels[e]),o.numOfRequestCompleted++,o.spinningReels.length==o.numOfRequestCompleted&&(console.log("game ending now"),o.enableInteraction(),o.calculateScore(o.winningCombinations).then(function(e){o.spinningReels=[],o.numOfRequestCompleted=0,o.spinningTime=0,o.spinSpeed=0}))},o.spinningTime),o.spinningTime+=500}o.createReelObj(3,["img/3xBAR.png","img/BAR.png","img/2xBAR.png","img/7.png","img/CHERRY.png"]).then(function(e){o.config(e,500),document.querySelector("#balanceInput").value=500,o.stopLoad()},function(e){console.log(e)}),i.addEventListener("click",function(){o.disableInteraction(),document.querySelector("#balanceInput").value=o.deductBalance(2);o.storage.get("reelObjects");console.log("start"),o.spinningTime=2e3,o.spinSpeed=Math.floor(97*Math.random())+23,console.log("spin speed:"+o.spinSpeed),new a(0),new a(1),new a(2)}),s.addEventListener("click",function(){document.querySelector("#debug_area").classList.add("visible"),"random"==o.mode?c.click():l.click()}),r.addEventListener("click",function(){document.querySelector("#debug_area").classList.remove("visible")}),l.addEventListener("click",function(){document.querySelector("#gameSetToFixedMode").classList.add("visible"),document.querySelector("#gameSetToRandomMode").classList.remove("visible")}),c.addEventListener("click",function(){document.querySelector("#gameSetToRandomMode").classList.add("visible"),document.querySelector("#gameSetToFixedMode").classList.remove("visible")})}]);